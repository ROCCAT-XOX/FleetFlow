{{ template "head" .}}
<body class="bg-gray-50 min-h-screen flex flex-col">
{{ template "navigation" .}}

<!-- Main Content -->
<main class="container mx-auto px-4 py-6 flex-grow">
    <div class="mb-6">
        <h1 class="text-2xl font-bold text-gray-900">Einstellungen</h1>
        <p class="mt-1 text-sm text-gray-500">Verwalten Sie Systemeinstellungen und Konfigurationen für FleetDrive</p>

        <!-- Erfolgs- oder Fehlermeldung -->
        {{if .success}}
        <div class="mt-4 p-4 bg-green-100 border border-green-200 rounded-md">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <p class="text-sm font-medium text-green-800">
                        {{if eq .success "added"}}Benutzer wurde erfolgreich hinzugefügt.
                        {{else if eq .success "updated"}}Benutzer wurde erfolgreich aktualisiert.
                        {{else if eq .success "deleted"}}Benutzer wurde erfolgreich gelöscht.
                        {{else}}Operation erfolgreich ausgeführt.
                        {{end}}
                    </p>
                </div>
            </div>
        </div>
        {{end}}
    </div>

    <!-- Tab Navigation -->
    <div class="mb-6 border-b border-gray-200">
        <nav class="flex -mb-px space-x-8" aria-label="Tabs">
            <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-indigo-500 text-indigo-600" data-tab="general">
                <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                Allgemein
            </button>

            {{ if eq .userRole "admin" }}
            <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="users">
                <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                </svg>
                Benutzerverwaltung
            </button>
            {{ end }}

            <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="integrations">
                <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                </svg>
                Integrationen
            </button>

            <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-400 flex items-center cursor-not-allowed" data-tab="notifications">
                <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM4.828 2.828l15.546 15.546a1 1 0 01-1.414 1.414L2.414 4.242a1 1 0 011.414-1.414zm9.9 2.829a7 7 0 00-9.9 9.9l9.9-9.9z"></path>
                </svg>
                Benachrichtigungen
                <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800">
                    Bald verfügbar
                </span>
            </button>
        </nav>
    </div>

    <!-- Tab Content -->
    <!-- 1. Allgemeine Einstellungen -->
    <div id="general-tab" class="tab-content">
        <div class="grid grid-cols-1 gap-6">
            <!-- Firmeninformationen -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-2">Firmeninformationen</h3>
                    <p class="text-sm text-gray-500 mb-4">Grundlegende Informationen über Ihr Unternehmen</p>

                    <form class="space-y-4">
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div>
                                <label for="company-name" class="block text-sm font-medium text-gray-700">Firmenname</label>
                                <input type="text" name="company-name" id="company-name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" value="FleetDrive GmbH">
                            </div>
                            <div>
                                <label for="fleet-size" class="block text-sm font-medium text-gray-700">Flottengröße</label>
                                <select id="fleet-size" name="fleet-size" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option>1-10 Fahrzeuge</option>
                                    <option>11-50 Fahrzeuge</option>
                                    <option>51-100 Fahrzeuge</option>
                                    <option>100+ Fahrzeuge</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="company-address" class="block text-sm font-medium text-gray-700">Adresse</label>
                            <textarea id="company-address" name="company-address" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">Musterstraße 123
80333 München</textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                Speichern
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- System-Einstellungen -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-2">System-Einstellungen</h3>
                    <p class="text-sm text-gray-500 mb-4">Anpassungen für die Nutzung von FleetDrive</p>

                    <form class="space-y-4">
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div>
                                <label for="timezone" class="block text-sm font-medium text-gray-700">Zeitzone</label>
                                <select id="timezone" name="timezone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option value="Europe/Berlin" selected>Europa/Berlin (CET/CEST)</option>
                                    <option value="Europe/London">Europa/London (GMT/BST)</option>
                                    <option value="America/New_York">Amerika/New York (EST/EDT)</option>
                                </select>
                            </div>
                            <div>
                                <label for="currency" class="block text-sm font-medium text-gray-700">Währung</label>
                                <select id="currency" name="currency" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option value="EUR" selected>Euro (€)</option>
                                    <option value="USD">US Dollar ($)</option>
                                    <option value="GBP">Britisches Pfund (£)</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div>
                                <label for="distance-unit" class="block text-sm font-medium text-gray-700">Entfernungseinheit</label>
                                <select id="distance-unit" name="distance-unit" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option value="km" selected>Kilometer</option>
                                    <option value="miles">Meilen</option>
                                </select>
                            </div>
                            <div>
                                <label for="fuel-unit" class="block text-sm font-medium text-gray-700">Kraftstoffeinheit</label>
                                <select id="fuel-unit" name="fuel-unit" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option value="liter" selected>Liter</option>
                                    <option value="gallon">Gallone</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                Speichern
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. Benutzerverwaltung (nur für Admins) -->
    {{ if eq .userRole "admin" }}
    <div id="users-tab" class="tab-content hidden">
        <div class="bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <div class="sm:flex sm:items-center sm:justify-between mb-6">
                    <div>
                        <h3 class="text-lg leading-6 font-medium text-gray-900">Benutzerverwaltung</h3>
                        <p class="mt-1 text-sm text-gray-500">Verwalten Sie Fahrer, Manager und Administratoren</p>
                    </div>
                    <button type="button" onclick="openModal('addUserModal')" class="mt-3 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        <svg class="-ml-1 mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        Benutzer hinzufügen
                    </button>
                </div>

                <!-- Statistiken -->
                <div class="grid grid-cols-1 gap-5 sm:grid-cols-3 mb-6">
                    <div class="bg-gray-50 overflow-hidden rounded-lg">
                        <div class="p-5">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">Aktive Benutzer</dt>
                                        <dd class="text-lg font-medium text-gray-900">{{if .users}}{{len .users}}{{else}}0{{end}}</dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 overflow-hidden rounded-lg">
                        <div class="p-5">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">Fahrer</dt>
                                        <dd class="text-lg font-medium text-gray-900">{{if .driverCount}}{{.driverCount}}{{else}}0{{end}}</dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 overflow-hidden rounded-lg">
                        <div class="p-5">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">Administratoren</dt>
                                        <dd class="text-lg font-medium text-gray-900">{{if .adminCount}}{{.adminCount}}{{else}}0{{end}}</dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Benutzerliste -->
                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                    <table class="min-w-full divide-y divide-gray-300">
                        <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">E-Mail</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rolle</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Aktionen</th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                        {{range .users}}
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center">
                                        <span class="text-indigo-800 font-medium">{{ getInitials (printf "%s %s" .FirstName .LastName) }}</span>
                                    </div>
                                    <div class="ml-4">
                                        <div class="text-sm font-medium text-gray-900">{{.FirstName}} {{.LastName}}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Email}}</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                {{if eq .Role "admin"}}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                    Administrator
                                </span>
                                {{else if eq .Role "manager"}}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    Manager
                                </span>
                                {{else}}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Benutzer
                                </span>
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                {{if eq .Status "active"}}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Aktiv
                                </span>
                                {{else}}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    Inaktiv
                                </span>
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <button type="button" onclick="openEditUserModal('{{.ID.Hex}}', '{{.FirstName}}', '{{.LastName}}', '{{.Email}}', '{{.Role}}', '{{.Status}}')" class="text-indigo-600 hover:text-indigo-900 mr-3">
                                    Bearbeiten
                                </button>
                                <button type="button" onclick="confirmDeleteUser('{{.ID.Hex}}', '{{.FirstName}} {{.LastName}}')" class="text-red-600 hover:text-red-900">
                                    Löschen
                                </button>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="5" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">
                                Keine Benutzer gefunden
                            </td>
                        </tr>
                        {{end}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    {{ end }}

    <!-- 3. Integrationen -->
    <div id="integrations-tab" class="tab-content hidden">
        <div class="space-y-6">
            <!-- PeopleFlow HR Integration -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-2">HR-System Integration</h3>
                    <p class="text-sm text-gray-500 mb-6">Verbinden Sie FleetDrive mit PeopleFlow für nahtlose Personalverwaltung</p>

                    <div class="grid grid-cols-1 gap-6">
                        <!-- PeopleFlow Integration -->
                        <div class="relative rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                            <div class="flex items-center mb-4">
                                <div class="flex-shrink-0">
                                    <div class="h-12 w-12 bg-green-100 rounded-full flex items-center justify-center">
                                        <img src="/static/integrations/PeopleFlow-Logo-Symbol.svg">
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-medium text-gray-900">PeopleFlow</h3>
                                    <p class="text-sm text-gray-500">Personalverwaltung und Mitarbeiterdaten</p>
                                </div>
                            </div>

                            <!-- Configuration form - only shown when not connected -->
                            <div id="peopleflowConfigForm" class="mt-2">
                                <form id="peopleflowForm" action="/api/integrations/peopleflow/save" method="POST">
                                    <div class="space-y-3">
                                        <div>
                                            <label for="peopleflow-base-url" class="block text-sm font-medium text-gray-700">PeopleFlow Server URL</label>
                                            <div class="mt-1 flex rounded-md shadow-sm">
                                                <input type="url" name="peopleflow-base-url" id="peopleflow-base-url"
                                                       class="flex-1 min-w-0 block w-full px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                                       placeholder="https://peopleflow.ihrunternehmen.de">
                                            </div>
                                            <p class="mt-1 text-xs text-gray-500">Die vollständige URL zu Ihrer PeopleFlow-Installation</p>
                                        </div>
                                        <div>
                                            <label for="peopleflow-username" class="block text-sm font-medium text-gray-700">Benutzername</label>
                                            <div class="mt-1 flex rounded-md shadow-sm">
                                                <input type="text" name="peopleflow-username" id="peopleflow-username"
                                                       class="flex-1 min-w-0 block w-full px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                                       placeholder="API-Benutzername">
                                            </div>
                                        </div>
                                        <div>
                                            <label for="peopleflow-password" class="block text-sm font-medium text-gray-700">Passwort</label>
                                            <div class="mt-1 flex rounded-md shadow-sm">
                                                <input type="password" name="peopleflow-password" id="peopleflow-password"
                                                       class="flex-1 min-w-0 block w-full px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                                       placeholder="API-Passwort">
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <input id="peopleflow-auto-sync" name="peopleflow-auto-sync" type="checkbox"
                                                   class="focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded">
                                            <div class="ml-3 text-sm">
                                                <label for="peopleflow-auto-sync" class="font-medium text-gray-700">Automatische Synchronisation</label>
                                                <p class="text-gray-500">Mitarbeiterdaten automatisch synchronisieren</p>
                                            </div>
                                        </div>
                                        <div>
                                            <label for="peopleflow-sync-interval" class="block text-sm font-medium text-gray-700">Sync-Intervall (Minuten)</label>
                                            <div class="mt-1 flex rounded-md shadow-sm">
                                                <input type="number" name="peopleflow-sync-interval" id="peopleflow-sync-interval"
                                                       class="flex-1 min-w-0 block w-full px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                                       placeholder="30" min="5" value="30">
                                            </div>
                                            <p class="mt-1 text-xs text-gray-500">Mindestens 5 Minuten</p>
                                        </div>
                                        <div class="text-right">
                                            <button type="button" onclick="savePeopleFlowCredentials()"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                                Integration einrichten
                                            </button>
                                        </div>
                                    </div>
                                    <p class="mt-2 text-xs text-gray-500">Die E-Mail-Adresse dient als Identifikator zwischen PeopleFlow und FleetFlow.</p>
                                </form>
                            </div>

                            <!-- Sync Settings Panel - shown when connected -->
                            <div id="peopleflowSyncSettings" class="mt-2" style="display: none;">
                                <div class="bg-gray-50 p-4 rounded-md border border-gray-200 mb-4">
                                    <h4 class="text-sm font-medium text-gray-700 mb-2">Synchronisations-Einstellungen</h4>

                                    <div class="flex items-start mb-3">
                                        <div class="flex items-center h-5">
                                            <input id="peopleflow-auto-sync-enabled" name="peopleflow-auto-sync-enabled" type="checkbox"
                                                   class="focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded">
                                        </div>
                                        <div class="ml-3 text-sm">
                                            <label for="peopleflow-auto-sync-enabled" class="font-medium text-gray-700">Automatische Synchronisation</label>
                                            <p class="text-gray-500">Mitarbeiterdaten automatisch im Hintergrund aktualisieren</p>
                                        </div>
                                    </div>

                                    <div class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2">
                                        <div class="flex-grow">
                                            <label for="peopleflow-sync-interval-minutes" class="block text-sm font-medium text-gray-700">Intervall (Minuten)</label>
                                            <input type="number" id="peopleflow-sync-interval-minutes" name="peopleflow-sync-interval-minutes"
                                                   class="mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"
                                                   min="5" value="30">
                                        </div>
                                        <div class="flex-shrink-0 self-end">
                                            <button type="button" onclick="updatePeopleFlowSyncSettings()"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                                Speichern
                                            </button>
                                        </div>
                                    </div>

                                    <div class="mt-3 text-xs text-gray-500">
                                        <div class="flex items-center mb-1">
                                            <span class="font-medium">Letzte Synchronisation:</span>
                                            <span id="peopleflow-last-sync" class="ml-1">wird geladen...</span>
                                        </div>
                                        <div class="flex items-center mb-1">
                                            <span class="font-medium">Synchronisierte Mitarbeiter:</span>
                                            <span id="peopleflow-synced-count" class="ml-1">wird geladen...</span>
                                        </div>
                                        <button type="button" onclick="triggerPeopleFlowFullSync()"
                                                class="text-green-600 hover:text-green-800 font-medium">
                                            Jetzt synchronisieren →
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-4 flex justify-between items-center">
        <span id="peopleflowStatus" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
            Wird geladen...
        </span>
                                <button type="button" id="removePeopleFlowBtn" class="text-sm text-red-600 hover:text-red-900" disabled onclick="removePeopleFlowIntegration()">
                                    Entfernen
                                </button>
                            </div>

                            <!-- Synchronisierungsbuttons -->
                            <div id="peopleflowSyncButtons" class="mt-4 flex flex-col space-y-2" style="display: none;">
                                <button type="button" onclick="syncPeopleFlowEmployees()"
                                        class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                    <svg class="mr-2 h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                    Mitarbeiterdaten synchronisieren
                                </button>

                                <button type="button" onclick="syncPeopleFlowDrivers()"
                                        class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                    <svg class="mr-2 h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                    Fahrer-Daten synchronisieren
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Verfügbare Integrationen -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">Kommende Fleet Management Integrationen</h3>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                            In Entwicklung
                        </span>
                    </div>
                    <p class="text-sm text-gray-500 mb-6">Diese Fleet Management Funktionen werden in zukünftigen Updates verfügbar sein</p>

                    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                        <!-- GPS Tracking -->
                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-75">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">GPS Tracking</h3>
                                    <p class="text-xs text-gray-500">Echtzeitüberwachung der Fahrzeugposition</p>
                                </div>
                            </div>
                        </div>

                        <!-- Fuel Cards -->
                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-75">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">Tankkarten</h3>
                                    <p class="text-xs text-gray-500">Automatische Kraftstoffkosten-Sync</p>
                                </div>
                            </div>
                        </div>

                        <!-- Insurance -->
                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-75">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <svg class="h-6 w-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">Versicherung</h3>
                                    <p class="text-xs text-gray-500">Schadensmeldungen und Verträge</p>
                                </div>
                            </div>
                        </div>

                        <!-- Workshop -->
                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-75">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="h-10 w-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <svg class="h-6 w-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">Werkstätten</h3>
                                    <p class="text-xs text-gray-500">Wartungstermine und Abrechnung</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-60">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2M7 4h10l1 15H6L7 4zM4 7h16M9 12h6"></path>
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">Telematik</h3>
                                    <p class="text-xs text-gray-500">Fahrzeugdaten in Echtzeit</p>
                                </div>
                            </div>
                        </div>

                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-60">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">Mobile App</h3>
                                    <p class="text-xs text-gray-500">iOS und Android App</p>
                                </div>
                            </div>
                        </div>

                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-60">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">BI Dashboard</h3>
                                    <p class="text-xs text-gray-500">Erweiterte Analysen</p>
                                </div>
                            </div>
                        </div>

                        <div class="relative rounded-lg border border-gray-200 bg-gray-50 p-4 opacity-60">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-gray-900">API</h3>
                                    <p class="text-xs text-gray-500">REST API für Entwickler</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 4. Benachrichtigungen (Disabled) -->
    <div id="notifications-tab" class="tab-content hidden">
        <div class="bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6 text-center">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM4.828 2.828l15.546 15.546a1 1 0 01-1.414 1.414L2.414 4.242a1 1 0 011.414-1.414zm9.9 2.829a7 7 0 00-9.9 9.9l9.9-9.9z"></path>
                </svg>
                <h3 class="mt-2 text-sm font-medium text-gray-900">Benachrichtigungen kommen bald</h3>
                <p class="mt-1 text-sm text-gray-500">Diese Funktion wird in einem zukünftigen Update verfügbar sein.</p>
            </div>
        </div>
    </div>
</main>

<!-- User Modals (gleich wie vorher aber vereinfacht) -->
<div id="addUserModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"></div>
        <div class="relative bg-white rounded-lg max-w-md w-full mx-auto shadow-xl">
            <div class="flex justify-between items-center px-6 py-4 border-b">
                <h3 class="text-lg font-medium text-gray-900">Benutzer hinzufügen</h3>
                <button type="button" onclick="closeModal('addUserModal')" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="addUserForm" onsubmit="submitAddUserForm(event)" class="px-6 py-4">
                <div class="space-y-4">
                    <div>
                        <label for="firstName" class="block text-sm font-medium text-gray-700">Vorname</label>
                        <input type="text" name="firstName" id="firstName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-gray-700">Nachname</label>
                        <input type="text" name="lastName" id="lastName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">E-Mail</label>
                        <input type="email" name="email" id="email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Passwort</label>
                        <input type="password" name="password" id="password" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label for="role" class="block text-sm font-medium text-gray-700">Rolle</label>
                        <select name="role" id="role" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            <option value="user">Fahrer</option>
                            <option value="manager">Manager</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                </div>
                <div class="mt-5 flex justify-end space-x-3">
                    <button type="button" onclick="closeModal('addUserModal')" class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                        Abbrechen
                    </button>
                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                        Hinzufügen
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Footer -->
{{ template "footer" . }}


<!-- PeopleFlow JavaScript einbinden -->
<script src="/static/js/peopleflow.js"></script>

<!-- Settings JavaScript einbinden -->
<script src="/static/js/settings.js"></script>

<!-- Bestehende Scripts erweitern -->
<script>
    // Tab-Wechsel Funktionalität erweitern für PeopleFlow
    document.addEventListener('DOMContentLoaded', function() {
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // Prüfen, ob der Tab deaktiviert ist (durch cursor-not-allowed Klasse)
                if (this.classList.contains('cursor-not-allowed')) {
                    return; // Wenn deaktiviert, keine Aktion ausführen
                }

                const tab = this.getAttribute('data-tab');

                // Aktiven Button-Zustand ändern
                tabBtns.forEach(button => {
                    if (!button.classList.contains('cursor-not-allowed')) {
                        button.classList.remove('border-green-500', 'text-green-600');
                        button.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    }
                });

                this.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                this.classList.add('border-green-500', 'text-green-600');

                // Tab-Inhalte ein-/ausblenden
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });

                document.getElementById(tab + '-tab').classList.remove('hidden');

                // Wenn Integrations-Tab aktiviert wird, PeopleFlow-Status laden
                if (tab === 'integrations') {
                    setTimeout(() => {
                        loadPeopleFlowStatus();
                    }, 100);
                }
            });
        });

        // Initial-Load für aktiven Tab
        const activeTab = document.querySelector('.tab-btn.border-green-500');
        if (activeTab && activeTab.getAttribute('data-tab') === 'integrations') {
            setTimeout(() => {
                loadPeopleFlowStatus();
            }, 500);
        }
    });

    // Erweitere die bestehende Integration-Status-Funktion
    function loadAllIntegrationStatus() {
        // PeopleFlow Status laden
        if (typeof loadPeopleFlowStatus === 'function') {
            loadPeopleFlowStatus();
        }

        // Bestehende Integration-Status-Funktionen aufrufen
        // (falls vorhanden für Timebutler, 123erfasst, etc.)
    }

    // Integration-Nachrichten anzeigen
    function showIntegrationMessage(message, type, integration) {
        // Zeige eine temporäre Nachricht für eine spezifische Integration an
        console.log(`${integration}: ${message} (${type})`);

        // Optional: Toast-Nachricht anzeigen
        if (typeof showToast === 'function') {
            showToast(message, type);
        }
    }

    // PeopleFlow-spezifische Initialisierung
    function initializePeopleFlowIntegration() {
        // Überprüfe ob PeopleFlow-Elemente vorhanden sind
        if (document.getElementById('peopleflowStatus')) {
            console.log('PeopleFlow Integration UI detected');

            // Status alle 30 Sekunden aktualisieren (nur wenn sichtbar)
            setInterval(() => {
                if (document.getElementById('integrations-tab') &&
                    !document.getElementById('integrations-tab').classList.contains('hidden')) {
                    loadPeopleFlowStatus();
                }
            }, 30000);
        }
    }

    // Nach DOM-Load initialisieren
    document.addEventListener('DOMContentLoaded', function() {
        initializePeopleFlowIntegration();
    });
</script>

<!-- Toast-Notification System (optional) -->
<script>
    // Einfaches Toast-System für Benachrichtigungen
    function showToast(message, type = 'info', duration = 3000) {
        // Entferne bestehende Toasts
        const existingToasts = document.querySelectorAll('.toast-notification');
        existingToasts.forEach(toast => toast.remove());

        // Toast-Container erstellen
        const toast = document.createElement('div');
        toast.className = 'toast-notification fixed top-4 right-4 z-50 max-w-sm w-full';

        let bgColor, textColor, icon;
        switch (type) {
            case 'success':
                bgColor = 'bg-green-500';
                textColor = 'text-white';
                icon = '✓';
                break;
            case 'error':
                bgColor = 'bg-red-500';
                textColor = 'text-white';
                icon = '✗';
                break;
            case 'warning':
                bgColor = 'bg-yellow-500';
                textColor = 'text-white';
                icon = '⚠';
                break;
            default:
                bgColor = 'bg-blue-500';
                textColor = 'text-white';
                icon = 'ℹ';
        }

        toast.innerHTML = `
            <div class="${bgColor} ${textColor} px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2">
                <span class="font-bold">${icon}</span>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.parentElement.remove()" class="ml-2 font-bold hover:opacity-75">×</button>
            </div>
        `;

        // Toast anzeigen
        document.body.appendChild(toast);

        // Animation hinzufügen
        setTimeout(() => {
            toast.style.transform = 'translateX(0)';
            toast.style.opacity = '1';
        }, 100);

        // Nach Ablauf automatisch entfernen
        setTimeout(() => {
            if (toast.parentElement) {
                toast.style.transform = 'translateX(100%)';
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                }, 300);
            }
        }, duration);
    }
</script>

<!-- CSS für Toast-Animations -->
<style>
    .toast-notification {
        transform: translateX(100%);
        opacity: 0;
        transition: all 0.3s ease-in-out;
    }

    .toast-notification.show {
        transform: translateX(0);
        opacity: 1;
    }
</style>
</body>
</html>